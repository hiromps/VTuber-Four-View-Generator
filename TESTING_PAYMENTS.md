# æ±ºæ¸ˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆæ‰‹é †

## ç¾åœ¨ã®çŠ¶æ…‹

âœ… **ã™ã¹ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼**

- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼: http://localhost:3003
- Stripe Webhook ãƒªã‚¹ãƒŠãƒ¼: èµ·å‹•ä¸­
- Stripe ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰: æœ‰åŠ¹

## ãƒ†ã‚¹ãƒˆæ‰‹é †

### 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3003 ã‚’é–‹ãã¾ã™ã€‚

### 2. ã‚µã‚¤ãƒ³ã‚¤ãƒ³

1. ã€ŒSign Inã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›
3. ãƒ¡ãƒ¼ãƒ«ã«å±Šã„ãŸãƒã‚¸ãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯
4. **åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯5ãƒˆãƒ¼ã‚¯ãƒ³ãŒè‡ªå‹•ä»˜ä¸ã•ã‚Œã¾ã™**

### 3. ãƒˆãƒ¼ã‚¯ãƒ³è³¼å…¥ã®ãƒ†ã‚¹ãƒˆ

1. ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€ŒBuy Tokensã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸æŠï¼ˆ10ã€30ã€ã¾ãŸã¯100ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
3. Stripeã®ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å…¥åŠ›ï¼š

#### ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±

**æˆåŠŸã™ã‚‹æ±ºæ¸ˆ**
- ã‚«ãƒ¼ãƒ‰ç•ªå·: `4242 4242 4242 4242`
- æœ‰åŠ¹æœŸé™: ä»»æ„ã®æœªæ¥ã®æ—¥ä»˜ï¼ˆä¾‹: `12/34`ï¼‰
- CVC: ä»»æ„ã®3æ¡ï¼ˆä¾‹: `123`ï¼‰
- éƒµä¾¿ç•ªå·: ä»»æ„ï¼ˆä¾‹: `12345`ï¼‰

**3Dã‚»ã‚­ãƒ¥ã‚¢èªè¨¼ãŒå¿…è¦**
- ã‚«ãƒ¼ãƒ‰ç•ªå·: `4000 0025 0000 3155`
- ãã®ä»–: ä¸Šè¨˜ã¨åŒã˜
- èªè¨¼ç”»é¢ã§ã€ŒCompleteã€ã‚’ã‚¯ãƒªãƒƒã‚¯

**æ‹’å¦ã•ã‚Œã‚‹ã‚«ãƒ¼ãƒ‰**
- ã‚«ãƒ¼ãƒ‰ç•ªå·: `4000 0000 0000 9995`
- ãã®ä»–: ä¸Šè¨˜ã¨åŒã˜
- æ‹’å¦ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### 4. æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ã®ç¢ºèª

1. **ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆç”»é¢**
   - Stripeã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»
   - ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å…¥åŠ›
   - ã€ŒPayã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **æ±ºæ¸ˆå®Œäº†**
   - æˆåŠŸãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
   - **ãƒˆãƒ¼ã‚¯ãƒ³ãŒè‡ªå‹•çš„ã«ä»˜ä¸ã•ã‚Œã¾ã™**

3. **Webhookç¢ºèª**
   - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Webhookã‚¤ãƒ™ãƒ³ãƒˆãŒå—ä¿¡ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
   - `checkout.session.completed` ã‚¤ãƒ™ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### 5. ãƒˆãƒ¼ã‚¯ãƒ³æ®‹é«˜ã®ç¢ºèª

- ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒˆãƒ¼ã‚¯ãƒ³è¡¨ç¤ºã§æ®‹é«˜ã‚’ç¢ºèª
- è³¼å…¥ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³æ•°ãŒæ­£ã—ãåŠ ç®—ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### 6. ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½¿ç”¨

1. **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚·ãƒ¼ãƒˆç”Ÿæˆï¼ˆ4ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ï¼‰**
   - ã€ŒCharacter Sheet Generatorã€ã‚¿ãƒ–ã‚’é¸æŠ
   - ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ã€ŒGenerate 4-View Sheetã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒˆãƒ¼ã‚¯ãƒ³ãŒ4ã¤æ¸›ã‚‹ã“ã¨ã‚’ç¢ºèª

2. **è¡¨æƒ…å·®åˆ†ç”Ÿæˆï¼ˆ4ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ï¼‰**
   - ã€ŒFacial Expressions Generatorã€ã‚¿ãƒ–ã‚’é¸æŠ
   - ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ã€ŒGenerate 4 Expressionsã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒˆãƒ¼ã‚¯ãƒ³ãŒ4ã¤æ¸›ã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚¢ãƒ¼ãƒˆç”Ÿæˆï¼ˆ1ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ï¼‰**
   - ã€ŒConcept Art Generatorã€ã‚¿ãƒ–ã‚’é¸æŠ
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›
   - ã€ŒGenerate Concept Artã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒˆãƒ¼ã‚¯ãƒ³ãŒ1ã¤æ¸›ã‚‹ã“ã¨ã‚’ç¢ºèª

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒˆãƒ¼ã‚¯ãƒ³ãŒä»˜ä¸ã•ã‚Œãªã„

1. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Webhookã‚¤ãƒ™ãƒ³ãƒˆã‚’ç¢ºèª
2. ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª
3. Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆhttps://dashboard.stripe.com/test/paymentsï¼‰ã§æ±ºæ¸ˆçŠ¶æ…‹ã‚’ç¢ºèª

### Webhookã‚¨ãƒ©ãƒ¼

1. Stripe CLIãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
2. Webhook secretãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆ`.env.local`ï¼‰
3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒæ­£ã—ã„ãƒãƒ¼ãƒˆï¼ˆ3003ï¼‰ã§èµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª

### æ±ºæ¸ˆãŒå®Œäº†ã—ãªã„

1. ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ãŒæ­£ã—ã„ã‹ç¢ºèª
2. ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
3. Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª

## Webhookã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Webhookã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–ã§ãã¾ã™ï¼š

```
2025-11-03 07:20:58   --> checkout.session.completed [evt_xxx]
2025-11-03 07:20:58  <--  [200] POST http://localhost:3003/api/stripe/webhook [evt_xxx]
```

- `-->`: Stripeã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡
- `<--`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®å¿œç­”

## Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®æ±ºæ¸ˆå±¥æ­´ã‚’ç¢ºèªï¼š
https://dashboard.stripe.com/test/payments

## é‡è¦ãªæ³¨æ„äº‹é …

âš ï¸ **ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã™**
- å®Ÿéš›ã®æ±ºæ¸ˆã¯è¡Œã‚ã‚Œã¾ã›ã‚“
- ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã®ã¿ä½¿ç”¨å¯èƒ½
- æœ¬ç•ªç’°å¢ƒã§ã¯Stripeã®Live modeã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

âš ï¸ **Webhook Listener**
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ã¯å¿…ãšStripe CLIã®Webhookãƒªã‚¹ãƒŠãƒ¼ã‚’èµ·å‹•ã—ã¦ãã ã•ã„
- ãƒªã‚¹ãƒŠãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„ã¨ãƒˆãƒ¼ã‚¯ãƒ³ãŒä»˜ä¸ã•ã‚Œã¾ã›ã‚“

âš ï¸ **ç’°å¢ƒå¤‰æ•°**
- `.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã¯`.gitignore`ã«å«ã¾ã‚Œã¦ã„ã¾ã™
- æœ¬ç•ªç’°å¢ƒã§ã¯åˆ¥é€”ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆå®Œäº†
2. ğŸ“¦ æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
3. ğŸ” æœ¬ç•ªç”¨Stripeã‚­ãƒ¼ã®è¨­å®š
4. ğŸŒ æœ¬ç•ªWebhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä½œæˆ

è©³ç´°ãªæœ¬ç•ªç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯ `STRIPE_SETUP.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
